#Bayesian MAP analysis 
model {  
 ## Likelihoods ##
	for(i in 1:n.hist) {
		ybar[i] ~ dnorm(theta[i], tau.hat[i])
		theta[i] ~ dnorm(mu,tau)
	}

	precision_heterogeneity <- 1/(std_heterogeneity*std_heterogeneity)

	#Half-normal prior for std of study effects
	sigma_heterogeneity ~ dnorm(.00001, precision_heterogeneity)

	#Precision of study effects
	tau <- 1/(sigma_heterogeneity*sigma_heterogeneity)

 
	mu ~ dnorm(0, 0.0001)

	theta.new ~ dnorm(mu, tau)


}